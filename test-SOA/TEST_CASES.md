# Test Cases - HRM SOA System

Tài liệu này chứa tất cả các test cases cho hệ thống HRM SOA, được tổ chức theo format bảng chuẩn.

---

## Mục 1: Backend Unit Tests (authController.test.js)

### 1.1. Registration API Tests

| TCID | Mô tả | Tiền điều kiện | Bước thực hiện | Dữ liệu kiểm thử | Kết quả mong đợi |
|------|-------|----------------|----------------|------------------|------------------|
| HRM-BACKEND-TC01 | Đăng ký thành công với dữ liệu hợp lệ | MongoDB đang chạy, test database sẵn sàng | 1. Gửi POST request đến `/auth/register` với dữ liệu hợp lệ<br>2. Kiểm tra response status và body<br>3. Kiểm tra user được tạo trong database | Email: `test@example.com`<br>Password: `password123`<br>Confirm Password: `password123`<br>Full Name: `Test User` | Status code: 201<br>Response có `accessToken`<br>Response có `role: 'staff'`<br>Response có `user` object với email đúng<br>User được tạo trong database với role 'staff' |
| HRM-BACKEND-TC02 | Trả về 400 khi thiếu email | MongoDB đang chạy, test database sẵn sàng | 1. Gửi POST request đến `/auth/register` không có email<br>2. Kiểm tra response | Password: `password123`<br>Confirm Password: `password123`<br>Full Name: `Test User` | Status code: 400<br>Response message: `"Email và mật khẩu là bắt buộc"` |
| HRM-BACKEND-TC03 | Trả về 400 khi thiếu password | MongoDB đang chạy, test database sẵn sàng | 1. Gửi POST request đến `/auth/register` không có password<br>2. Kiểm tra response | Email: `test@example.com`<br>Confirm Password: `password123`<br>Full Name: `Test User` | Status code: 400<br>Response message: `"Email và mật khẩu là bắt buộc"` |
| HRM-BACKEND-TC04 | Trả về 400 khi password và confirm_password không khớp | MongoDB đang chạy, test database sẵn sàng | 1. Gửi POST request đến `/auth/register` với password và confirm_password khác nhau<br>2. Kiểm tra response | Email: `test@example.com`<br>Password: `password123`<br>Confirm Password: `password456`<br>Full Name: `Test User` | Status code: 400<br>Response message: `"Mật khẩu nhập lại không khớp"` |
| HRM-BACKEND-TC05 | Trả về 409 khi email đã tồn tại | MongoDB đang chạy, user với email `existing@example.com` đã tồn tại trong database | 1. Tạo user với email `existing@example.com`<br>2. Gửi POST request đến `/auth/register` với email đã tồn tại<br>3. Kiểm tra response | Email: `existing@example.com`<br>Password: `password123`<br>Confirm Password: `password123`<br>Full Name: `Test User` | Status code: 409<br>Response message: `"Email already registered"` |
| HRM-BACKEND-TC06 | Hash password trước khi lưu vào database | MongoDB đang chạy, test database sẵn sàng | 1. Gửi POST request đến `/auth/register` với password<br>2. Kiểm tra user trong database<br>3. Verify password hash và có thể verify được | Email: `test@example.com`<br>Password: `password123`<br>Confirm Password: `password123`<br>Full Name: `Test User` | Status code: 201<br>Password trong database được hash (không phải plain text)<br>Hash có độ dài 60 ký tự (bcrypt)<br>Có thể verify password bằng bcrypt.compare |
| HRM-BACKEND-TC07 | Đăng ký thành công không cần full_name | MongoDB đang chạy, test database sẵn sàng | 1. Gửi POST request đến `/auth/register` không có full_name<br>2. Kiểm tra response | Email: `test@example.com`<br>Password: `password123`<br>Confirm Password: `password123` | Status code: 201<br>Response có `accessToken`<br>Đăng ký thành công |

### 1.2. Login API Tests

| TCID | Mô tả | Tiền điều kiện | Bước thực hiện | Dữ liệu kiểm thử | Kết quả mong đợi |
|------|-------|----------------|----------------|------------------|------------------|
| HRM-BACKEND-TC08 | Đăng nhập thành công với credentials đúng | MongoDB đang chạy, user với email `login@example.com` và password `password123` đã tồn tại | 1. Gửi POST request đến `/auth/login` với credentials đúng<br>2. Kiểm tra response | Email: `login@example.com`<br>Password: `password123` | Status code: 200<br>Response có `accessToken`<br>Response có `role: 'staff'` |
| HRM-BACKEND-TC09 | Trả về 400 khi thiếu email | MongoDB đang chạy, test database sẵn sàng | 1. Gửi POST request đến `/auth/login` không có email<br>2. Kiểm tra response | Password: `password123` | Status code: 400<br>Response message: `"Email and password required"` |
| HRM-BACKEND-TC10 | Trả về 400 khi thiếu password | MongoDB đang chạy, test database sẵn sàng | 1. Gửi POST request đến `/auth/login` không có password<br>2. Kiểm tra response | Email: `login@example.com` | Status code: 400<br>Response message: `"Email and password required"` |
| HRM-BACKEND-TC11 | Trả về 401 khi email không tồn tại | MongoDB đang chạy, test database sẵn sàng | 1. Gửi POST request đến `/auth/login` với email không tồn tại<br>2. Kiểm tra response | Email: `nonexistent@example.com`<br>Password: `password123` | Status code: 401<br>Response message: `"Invalid credentials"` |
| HRM-BACKEND-TC12 | Trả về 401 khi password sai | MongoDB đang chạy, user với email `login@example.com` đã tồn tại | 1. Gửi POST request đến `/auth/login` với password sai<br>2. Kiểm tra response | Email: `login@example.com`<br>Password: `wrongpassword` | Status code: 401<br>Response message: `"Invalid credentials"` |
| HRM-BACKEND-TC13 | Trả về JWT token hợp lệ khi đăng nhập thành công | MongoDB đang chạy, user với email `login@example.com` và password `password123` đã tồn tại | 1. Gửi POST request đến `/auth/login` với credentials đúng<br>2. Kiểm tra accessToken<br>3. Verify JWT token | Email: `login@example.com`<br>Password: `password123` | Status code: 200<br>Response có `accessToken` (không null/undefined)<br>JWT token có thể decode được<br>Token chứa `email: 'login@example.com'`<br>Token chứa `role: 'staff'` |

---

## Mục 2: Frontend UI Tests - Login/Register (run-tests.js)

| TCID | Mô tả | Tiền điều kiện | Bước thực hiện | Dữ liệu kiểm thử | Kết quả mong đợi |
|------|-------|----------------|----------------|------------------|------------------|
| HRM-UI-REGISTER-TC01 | Đăng ký user mới và đăng nhập thành công | Frontend server đang chạy, backend services đang chạy, Chrome browser sẵn sàng | 1. Truy cập trang `/register`<br>2. Điền form đăng ký với email và password mới<br>3. Nhấn nút "Đăng ký"<br>4. Sau khi đăng ký thành công, điền form đăng nhập<br>5. Nhấn nút "Đăng nhập" | Email: `test{timestamp}@example.com`<br>Password: `Test123456!`<br>Confirm Password: `Test123456!` | Đăng ký thành công và chuyển sang trang login<br>Đăng nhập thành công<br>Điều hướng đến trang `/home`, `/customers`, `/dashboard`, hoặc `/staff`<br>Không còn ở trang `/login` |
| HRM-UI-REGISTER-TC02 | Đăng ký thành công rồi đăng nhập lại | Frontend server đang chạy, backend services đang chạy, Chrome browser sẵn sàng | 1. Truy cập trang `/register`<br>2. Điền form đăng ký với email và password mới<br>3. Nhấn nút "Đăng ký"<br>4. Kiểm tra đã chuyển sang trang login<br>5. Điền form đăng nhập với tài khoản vừa tạo<br>6. Nhấn nút "Đăng nhập" | Email: `register{timestamp}@example.com`<br>Password: `Test123456!`<br>Confirm Password: `Test123456!` | Đăng ký thành công<br>Chuyển sang trang `/login`<br>Đăng nhập thành công<br>Điều hướng đến trang đúng (không còn ở `/login`) |
| HRM-UI-REGISTER-TC03 | Đăng ký rồi quay lại và đăng nhập thành công | Frontend server đang chạy, backend services đang chạy, Chrome browser sẵn sàng | 1. Truy cập trang `/register`<br>2. Điền form đăng ký với email và password mới<br>3. Nhấn nút "Đăng ký"<br>4. Sau khi chuyển sang login, điều hướng trực tiếp đến `/login`<br>5. Điền form đăng nhập với tài khoản vừa tạo<br>6. Nhấn nút "Đăng nhập" | Email: `backlogin{timestamp}@example.com`<br>Password: `Test123456!`<br>Confirm Password: `Test123456!` | Đăng ký thành công<br>Chuyển sang trang `/login`<br>Có thể điều hướng lại trang login<br>Đăng nhập thành công<br>Điều hướng đến trang đúng |
| HRM-UI-REGISTER-TC04 | Hiển thị lỗi khi đăng ký với email trùng | Frontend server đang chạy, backend services đang chạy, email `admin@gmail.com` đã tồn tại | 1. Truy cập trang `/register`<br>2. Điền form với email đã tồn tại<br>3. Nhấn nút "Đăng ký" | Email: `admin@gmail.com` (đã tồn tại)<br>Password: `NewPassword123!`<br>Confirm Password: `NewPassword123!` | Hiển thị thông báo lỗi về email đã tồn tại (chứa từ "tồn tại", "exists", hoặc "duplicate") |
| HRM-UI-REGISTER-TC05 | Hiển thị lỗi khi đăng ký với password không khớp | Frontend server đang chạy, backend services đang chạy, Chrome browser sẵn sàng | 1. Truy cập trang `/register`<br>2. Điền form với password và confirm password khác nhau<br>3. Nhấn nút "Đăng ký" | Email: `mismatch{timestamp}@example.com`<br>Password: `Password123!`<br>Confirm Password: `Mismatch123!` | Hiển thị thông báo lỗi về password không khớp (chứa từ "không khớp", "mismatch", hoặc "not match") |
| HRM-UI-REGISTER-TC06 | Validate độ dài password khi đăng ký | Frontend server đang chạy, backend services đang chạy, Chrome browser sẵn sàng | 1. Truy cập trang `/register`<br>2. Điền form với password quá ngắn<br>3. Nhấn nút "Đăng ký" | Email: `test@example.com`<br>Password: `short`<br>Confirm Password: `short` | Hiển thị validation error cho password ngắn<br>Hoặc vẫn ở trang `/register` (form validation) |
| HRM-UI-LOGIN-TC01 | Đăng nhập thành công với credentials hợp lệ | Frontend server đang chạy, backend services đang chạy, tài khoản admin tồn tại | 1. Truy cập trang `/login`<br>2. Điền email và password hợp lệ<br>3. Nhấn nút "Đăng nhập" | Email: `admin@gmail.com` (hoặc từ env `TEST_USER_EMAIL`)<br>Password: `admin123` (hoặc từ env `TEST_USER_PASSWORD`) | Đăng nhập thành công<br>Điều hướng đến trang `/home`, `/customers`, `/dashboard`, hoặc `/staff`<br>Không còn ở trang `/login` |
| HRM-UI-LOGIN-TC02 | Hiển thị lỗi khi đăng nhập với password sai | Frontend server đang chạy, backend services đang chạy, tài khoản admin tồn tại | 1. Truy cập trang `/login`<br>2. Điền email đúng và password sai<br>3. Nhấn nút "Đăng nhập" | Email: `admin@gmail.com`<br>Password: `wrongpassword123` | Hiển thị thông báo lỗi (chứa từ "sai", "wrong", hoặc "incorrect")<br>Vẫn ở trang `/login` |
| HRM-UI-LOGIN-TC03 | Hiển thị lỗi khi đăng nhập với email không tồn tại | Frontend server đang chạy, backend services đang chạy, Chrome browser sẵn sàng | 1. Truy cập trang `/login`<br>2. Điền email không tồn tại<br>3. Nhấn nút "Đăng nhập" | Email: `nonexistent@example.com`<br>Password: `password123` | Hiển thị thông báo lỗi (chứa từ "không", "not", hoặc "exist")<br>Vẫn ở trang `/login` |

---

## Mục 3: Frontend UI Tests - Admin Search & Filter (admin-search-filter.test.js)

| TCID | Mô tả | Tiền điều kiện | Bước thực hiện | Dữ liệu kiểm thử | Kết quả mong đợi |
|------|-------|----------------|----------------|------------------|------------------|
| HRM-UI-ADMIN-TC01 | Tìm kiếm nhân viên theo tên | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản admin, có ít nhất 1 nhân viên trong hệ thống | 1. Đăng nhập với tài khoản admin<br>2. Truy cập trang `/admin`<br>3. Lấy tên nhân viên đầu tiên<br>4. Nhập một phần tên vào ô tìm kiếm<br>5. Kiểm tra kết quả | Search text: 3 ký tự đầu của tên nhân viên | Kết quả tìm kiếm hiển thị nhân viên có tên chứa text tìm kiếm<br>Hoặc không có kết quả nếu không khớp |
| HRM-UI-ADMIN-TC02 | Tìm kiếm nhân viên theo email | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản admin, có ít nhất 1 nhân viên trong hệ thống | 1. Đăng nhập với tài khoản admin<br>2. Truy cập trang `/admin`<br>3. Lấy email nhân viên đầu tiên<br>4. Nhập phần email (trước @) vào ô tìm kiếm<br>5. Kiểm tra kết quả | Search text: phần email trước ký tự @ | Kết quả tìm kiếm hiển thị nhân viên có email chứa text tìm kiếm |
| HRM-UI-ADMIN-TC03 | Filter theo trạng thái (tất cả các options) | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản admin, có nhân viên trong hệ thống | 1. Đăng nhập với tài khoản admin<br>2. Truy cập trang `/admin`<br>3. Click nút "Bộ lọc:"<br>4. Chọn "Đang làm việc"<br>5. Kiểm tra filter được áp dụng<br>6. Reset về "Tất cả" | Filter: "Đang làm việc" → "Tất cả" | Filter button hiển thị "Đang làm việc" khi được chọn<br>Filter button hiển thị "Tất cả" khi reset |
| HRM-UI-ADMIN-TC04 | Filter theo trạng thái "Đang làm việc" | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản admin, có nhân viên trong hệ thống | 1. Đăng nhập với tài khoản admin<br>2. Truy cập trang `/admin`<br>3. Click nút "Bộ lọc:"<br>4. Chọn "Đang làm việc"<br>5. Kiểm tra kết quả filter | Filter: "Đang làm việc" | Filter button hiển thị "Đang làm việc"<br>Danh sách nhân viên được lọc theo trạng thái "Đang làm việc" |
| HRM-UI-ADMIN-TC05 | Filter theo trạng thái "Nghỉ phép" | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản admin, có nhân viên trong hệ thống | 1. Đăng nhập với tài khoản admin<br>2. Truy cập trang `/admin`<br>3. Click nút "Bộ lọc:"<br>4. Chọn "Nghỉ phép"<br>5. Kiểm tra filter được áp dụng<br>6. Reset về "Tất cả" | Filter: "Nghỉ phép" → "Tất cả" | Filter button hiển thị "Nghỉ phép" khi được chọn<br>Filter button hiển thị "Tất cả" khi reset |
| HRM-UI-ADMIN-TC06 | Filter theo trạng thái "Đã nghỉ việc" | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản admin, có nhân viên trong hệ thống | 1. Đăng nhập với tài khoản admin<br>2. Truy cập trang `/admin`<br>3. Click nút "Bộ lọc:"<br>4. Chọn "Đã nghỉ việc"<br>5. Kiểm tra filter được áp dụng<br>6. Reset về "Tất cả" | Filter: "Đã nghỉ việc" → "Tất cả" | Filter button hiển thị "Đã nghỉ việc" khi được chọn<br>Filter button hiển thị "Tất cả" khi reset |
| HRM-UI-ADMIN-TC07 | Kết hợp search và filter | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản admin, có nhân viên trong hệ thống | 1. Đăng nhập với tài khoản admin<br>2. Truy cập trang `/admin`<br>3. Nhập text tìm kiếm theo tên<br>4. Áp dụng filter "Đang làm việc"<br>5. Kiểm tra kết quả kết hợp | Search: 3 ký tự đầu của tên nhân viên<br>Filter: "Đang làm việc" | Kết quả được lọc theo cả search và filter<br>Số lượng kết quả sau filter không lớn hơn sau search |
| HRM-UI-ADMIN-TC08 | Hiển thị thông báo khi search không có kết quả | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản admin | 1. Đăng nhập với tài khoản admin<br>2. Truy cập trang `/admin`<br>3. Nhập text không tồn tại vào ô tìm kiếm<br>4. Kiểm tra thông báo | Search text: `NONEXISTENT_USER_XYZ_12345` | Hiển thị thông báo "Không có nhân viên nào"<br>Hoặc danh sách rỗng (0 nhân viên) |

---

## Mục 4: Frontend UI Tests - Staff Customer Management (staff-customer.test.js)

| TCID | Mô tả | Tiền điều kiện | Bước thực hiện | Dữ liệu kiểm thử | Kết quả mong đợi |
|------|-------|----------------|----------------|------------------|------------------|
| HRM-UI-STAFF-CUSTOMER-TC01 | Thêm khách hàng mới bằng tài khoản nhân viên | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản staff, Chrome browser sẵn sàng | 1. Đăng nhập với tài khoản staff<br>2. Điều hướng đến trang `/staff/customers`<br>3. Click nút "Thêm khách hàng"<br>4. Kiểm tra modal "Thêm khách hàng" hiển thị<br>5. Điền thông tin khách hàng (tên, email, số điện thoại)<br>6. Click nút "Lưu"<br>7. Kiểm tra modal đã đóng<br>8. Kiểm tra khách hàng mới xuất hiện trong danh sách | Tên: `Khách hàng Test {timestamp}`<br>Email: `customer{timestamp}@test.com`<br>Số điện thoại: `090{7 số cuối của timestamp}` | Modal "Thêm khách hàng" hiển thị<br>Modal đã đóng sau khi lưu<br>Khách hàng mới xuất hiện trong danh sách với tên đúng<br>Không có thông báo lỗi "thất bại" |
| HRM-UI-STAFF-CUSTOMER-TC02 | Tìm kiếm khách hàng theo tên | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản staff, có ít nhất 1 khách hàng trong hệ thống | 1. Đăng nhập với tài khoản staff<br>2. Điều hướng đến trang `/staff/customers`<br>3. Tìm ô tìm kiếm<br>4. Nhập từ khóa tìm kiếm "Test"<br>5. Đợi kết quả filter<br>6. Kiểm tra kết quả tìm kiếm<br>7. Tìm kiếm với tên cụ thể "Khách hàng Test" | Search text: `Test`<br>Sau đó: `Khách hàng Test` | Kết quả tìm kiếm hiển thị khách hàng có tên chứa từ khóa<br>Hoặc hiển thị thông báo "Chưa có khách hàng nào" nếu không có kết quả<br>Tìm kiếm với tên cụ thể trả về kết quả phù hợp |
| HRM-UI-STAFF-CUSTOMER-TC03 | Thêm khách hàng và tìm kiếm theo tên | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản staff, Chrome browser sẵn sàng | 1. Đăng nhập với tài khoản staff<br>2. Thêm khách hàng mới với tên `Khách hàng Test {timestamp}`<br>3. Sau khi thêm thành công, tìm kiếm với tên đầy đủ của khách hàng vừa thêm<br>4. Kiểm tra khách hàng vừa thêm xuất hiện trong kết quả<br>5. Tìm kiếm với một phần tên "Khách hàng Test"<br>6. Kiểm tra kết quả tìm kiếm | Tên khách hàng: `Khách hàng Test {timestamp}`<br>Search 1: Tên đầy đủ của khách hàng<br>Search 2: `Khách hàng Test` | Khách hàng mới được thêm thành công<br>Khách hàng vừa thêm xuất hiện trong kết quả tìm kiếm với tên đầy đủ<br>Tìm kiếm với một phần tên trả về kết quả chứa khách hàng vừa thêm<br>Số lượng kết quả > 0 |

---

## Mục 5: Frontend UI Tests - Staff Customer Export Excel (staff-customer-export.test.js)

| TCID | Mô tả | Tiền điều kiện | Bước thực hiện | Dữ liệu kiểm thử | Kết quả mong đợi |
|------|-------|----------------|----------------|------------------|------------------|
| HRM-UI-STAFF-EXPORT-TC01 | Export Excel khi danh sách rỗng | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản staff, Chrome browser sẵn sàng, không có khách hàng trong danh sách | 1. Đăng nhập với tài khoản staff<br>2. Điều hướng đến trang `/staff/customers`<br>3. Kiểm tra danh sách rỗng (hoặc có ít khách hàng)<br>4. Click nút "Xuất Excel"<br>5. Đợi file download<br>6. Kiểm tra file Excel đã được tải xuống<br>7. Đọc và kiểm tra file Excel | Danh sách khách hàng: Rỗng hoặc có dữ liệu | File Excel được tải xuống với tên `customers_staff_{timestamp}.xlsx`<br>File Excel có cấu trúc đúng (có các cột: STT, Tên khách hàng, Email, Số điện thoại, Địa chỉ, Người phụ trách, Trạng thái, Tags)<br>Nếu danh sách rỗng, file có thể rỗng hoặc có header<br>Không có alert lỗi "thất bại" |
| HRM-UI-STAFF-EXPORT-TC02 | Export Excel với ký tự đặc biệt | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản staff, Chrome browser sẵn sàng | 1. Đăng nhập với tài khoản staff<br>2. Điều hướng đến trang `/staff/customers`<br>3. Thêm khách hàng với ký tự đặc biệt trong tên, email, địa chỉ<br>4. Click nút "Xuất Excel"<br>5. Đợi file download<br>6. Đọc file Excel và kiểm tra ký tự đặc biệt được giữ nguyên | Tên: `Công ty ABC & XYZ <>"'\/[]{}|`~!@#$%^&*()_+-=`<br>Email: `test+special@example.com`<br>Địa chỉ: `123 Đường Nguyễn Văn A, Phường 1, Quận 1, TP.HCM (Việt Nam)` | File Excel được tải xuống thành công<br>Khách hàng với ký tự đặc biệt xuất hiện trong file<br>Ký tự đặc biệt không bị mất hoặc bị thay đổi<br>Tên, email, địa chỉ hiển thị đúng với ký tự đặc biệt |
| HRM-UI-STAFF-EXPORT-TC03 | Export Excel với nhiều khách hàng | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản staff, Chrome browser sẵn sàng | 1. Đăng nhập với tài khoản staff<br>2. Điều hướng đến trang `/staff/customers`<br>3. Thêm 10 khách hàng với thông tin đầy đủ<br>4. Click nút "Xuất Excel"<br>5. Đợi file download (có thể mất thời gian hơn)<br>6. Kiểm tra file size và số dòng dữ liệu<br>7. Kiểm tra tất cả khách hàng có trong file | Số lượng khách hàng: 10<br>Mỗi khách hàng có: tên, email, số điện thoại, địa chỉ | File Excel được tải xuống thành công<br>File có size > 0 bytes<br>Số dòng dữ liệu trong file >= 10<br>Tất cả khách hàng có đầy đủ thông tin (STT, Tên, Email, Số điện thoại, Địa chỉ)<br>Thời gian export hợp lý (< 30 giây) |
| HRM-UI-STAFF-EXPORT-TC04 | Export Excel với data lớn (không crash) | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản staff, Chrome browser sẵn sàng | 1. Đăng nhập với tài khoản staff<br>2. Điều hướng đến trang `/staff/customers`<br>3. Thêm 50 khách hàng với thông tin đầy đủ<br>4. Kiểm tra browser vẫn hoạt động bình thường<br>5. Click nút "Xuất Excel"<br>6. Đợi file download (có thể mất thời gian)<br>7. Kiểm tra browser không bị crash<br>8. Kiểm tra file Excel đã được tải xuống<br>9. Đọc file và kiểm tra số lượng dữ liệu<br>10. Kiểm tra browser vẫn hoạt động sau export | Số lượng khách hàng: 50<br>Mỗi khách hàng có thông tin đầy đủ với tên dài | File Excel được tải xuống thành công<br>Browser không bị crash trong quá trình export<br>Browser vẫn hoạt động sau khi export<br>File Excel có size hợp lý (không quá lớn so với số dòng)<br>Số dòng dữ liệu trong file >= 50<br>Thời gian export hợp lý (< 60 giây cho 50 dòng)<br>Không có memory leak (file size không quá lớn) |

---

## Mục 6: Frontend UI Tests - Navigation (navigation.test.js)

| TCID | Mô tả | Tiền điều kiện | Bước thực hiện | Dữ liệu kiểm thử | Kết quả mong đợi |
|------|-------|----------------|----------------|------------------|------------------|
| HRM-UI-NAV-TC01 | Test link "Đăng ký ngay" từ trang Login → Register | Frontend server đang chạy, Chrome browser sẵn sàng | 1. Truy cập trang `/login`<br>2. Kiểm tra form đăng nhập hiển thị<br>3. Tìm và click link "Đăng ký ngay"<br>4. Kiểm tra form đã chuyển sang mode Register | Trang `/login` | Form hiển thị field "Họ và tên" (input placeholder "Nguyễn Văn A")<br>Button text thay đổi thành "Đăng ký"<br>URL vẫn là `/login` (cùng component) |
| HRM-UI-NAV-TC02 | Test link "Đăng nhập" từ trang Register → Login | Frontend server đang chạy, Chrome browser sẵn sàng | 1. Truy cập trang `/login`<br>2. Click link "Đăng ký ngay" để chuyển sang mode Register<br>3. Kiểm tra form đăng ký hiển thị<br>4. Tìm và click link "Đăng nhập"<br>5. Kiểm tra form đã chuyển về mode Login | Trang `/login` ở mode Register | Form không còn field "Họ và tên"<br>Button text là "Đăng nhập"<br>URL vẫn là `/login` |
| HRM-UI-NAV-TC03 | Test redirect sau đăng nhập thành công → Trang chủ | Frontend server đang chạy, backend services đang chạy, tài khoản admin tồn tại, Chrome browser sẵn sàng | 1. Truy cập trang `/login`<br>2. Điền email và password hợp lệ<br>3. Click nút "Đăng nhập"<br>4. Đợi redirect<br>5. Kiểm tra URL sau redirect | Email: `admin@gmail.com` (hoặc từ env `TEST_ADMIN_EMAIL`)<br>Password: `admin123` (hoặc từ env `TEST_ADMIN_PASSWORD`) | URL chuyển sang `/home` hoặc `/admin` (tùy role)<br>Không còn ở trang `/login`<br>Sidebar hiển thị (nếu là admin hoặc staff) |
| HRM-UI-NAV-TC04 | Test redirect sau đăng ký thành công → Trang Login | Frontend server đang chạy, backend services đang chạy, Chrome browser sẵn sàng | 1. Truy cập trang `/login`<br>2. Click link "Đăng ký ngay" để chuyển sang mode Register<br>3. Điền form đăng ký với email và password mới<br>4. Click nút "Đăng ký"<br>5. Đợi alert và redirect<br>6. Kiểm tra URL và form | Email: `test.navigation.{randomId}@example.com`<br>Password: `Test123456!`<br>Confirm Password: `Test123456!`<br>Full Name: `Test User Navigation` | Có alert "Đăng ký thành công! Vui lòng đăng nhập để tiếp tục."<br>URL là `/login`<br>Form ở mode Login (không còn field "Họ và tên") |
| HRM-UI-NAV-TC05 | Test các menu items trong Admin Sidebar điều hướng đúng trang | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản admin, Chrome browser sẵn sàng | 1. Đăng nhập với tài khoản admin<br>2. Kiểm tra Admin Sidebar hiển thị<br>3. Lặp qua từng menu item:<br>   - Click menu item<br>   - Đợi navigation<br>   - Kiểm tra URL đúng | Menu items:<br>- "Tổng quan" → `/home`<br>- "Nhân viên" → `/admin`<br>- "Khách hàng" → `/crm`<br>- "Lịch sử khách hàng" → `/crm/history`<br>- "Phòng ban" → `/departments`<br>- "Lương thưởng" → `/payroll` | Mỗi menu item click vào sẽ navigate đúng đến URL tương ứng<br>URL path chứa path mong đợi<br>Tất cả 6 menu items đều hoạt động đúng |
| HRM-UI-NAV-TC06 | Test các menu items trong Staff Sidebar điều hướng đúng trang | Frontend server đang chạy, backend services đang chạy, đã đăng nhập với tài khoản staff, Chrome browser sẵn sàng, có `TEST_STAFF_EMAIL` và `TEST_STAFF_PASSWORD` | 1. Đăng nhập với tài khoản staff<br>2. Kiểm tra Staff Sidebar hiển thị<br>3. Lặp qua từng menu item:<br>   - Click menu item<br>   - Đợi navigation<br>   - Kiểm tra URL đúng | Menu items:<br>- "Tổng quan" → `/home`<br>- "Hồ sơ" → `/staff/employees`<br>- "Khách hàng" → `/staff/customers`<br>- "Phòng ban" → `/staff/departments` | Mỗi menu item click vào sẽ navigate đúng đến URL tương ứng<br>URL path chứa path mong đợi<br>Tất cả 4 menu items đều hoạt động đúng<br>Lưu ý: Test sẽ skip nếu không có `TEST_STAFF_EMAIL` và `TEST_STAFF_PASSWORD` |
| HRM-UI-NAV-TC07 | Test protected routes redirect to login | Frontend server đang chạy, Chrome browser sẵn sàng, chưa đăng nhập | 1. Clear localStorage và sessionStorage<br>2. Truy cập protected route `/admin` khi chưa đăng nhập<br>3. Đợi redirect<br>4. Kiểm tra URL | Protected route: `/admin` | URL redirect về `/login`<br>Form đăng nhập hiển thị<br>Không thể truy cập protected route khi chưa đăng nhập |

---

## Tổng kết

- **Tổng số test cases**: 44
  - Backend Unit Tests: 13 test cases
  - Frontend UI Tests - Login/Register: 9 test cases
  - Frontend UI Tests - Admin Search & Filter: 8 test cases
  - Frontend UI Tests - Staff Customer Management: 3 test cases
  - Frontend UI Tests - Staff Customer Export Excel: 4 test cases
  - Frontend UI Tests - Navigation: 7 test cases

## Ghi chú

- Tất cả test cases đã được implement và có thể chạy tự động
- Backend tests sử dụng Jest và Supertest
- Frontend tests sử dụng Selenium WebDriver với Chrome
- Test cases được thiết kế để chạy độc lập và có thể chạy song song
- Database test được tự động cleanup sau mỗi test run

